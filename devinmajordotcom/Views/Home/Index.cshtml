@using Newtonsoft.Json
@model devinmajordotcom.ViewModels.MainLandingPageViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.Partial("_Apps", Model.LandingPageApplicationLinks)

@Html.Partial("_ServerStatus")

@Html.Partial("_ContactContent", Model.ContactEmailData)

@if (Model.CurrentUserViewModel.UserIsAdmin && Model.CurrentUserViewModel.UserIsActive)
{
    @Html.Partial("_ApplicationManager", Model.CurrentApplicationData)
}
else
{
    @section scripts {
        <script>
            var html = '@Html.Raw(@Html.Partial("_LoginModal", Model.CurrentUserViewModel).ToHtmlString().Replace(Environment.NewLine, ""))';
            $('body').append(html);
        </script>
    }
}

@if(String.IsNullOrEmpty(Model.CurrentUserViewModel.EmailAddress) && Model.CurrentUserViewModel.UserIsAdmin && Model.CurrentUserViewModel.UserIsActive) {
    @section scripts {
        <script>
            var html = '@Html.Raw(@Html.Partial("_AdminFirstRunModal", Model.CurrentUserViewModel).ToHtmlString().Replace(Environment.NewLine, ""))';
            $('body').append(html);
            $("#adminFirstRunFormModal").modal();
        </script>
    }
}