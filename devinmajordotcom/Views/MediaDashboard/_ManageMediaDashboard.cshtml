@model devinmajordotcom.ViewModels.MediaDashboardViewModel
@{
    Model.SidebarLinks = Model.SidebarLinks.OrderBy(x => x.Order).ToList();
}

@using (Ajax.BeginForm("_ManageMediaDashboard", "MediaDashboard", null, new AjaxOptions { HttpMethod = "Post", OnSuccess = "AjaxSuccess(data)", OnFailure = "AjaxFailure(data)" }, new { @id = "updateMediaDashboardForm" }))
{
    var count = 0;
    <div id="tagsForm" class="">
        <ul id="mediaDashboardLinksList" class="mediaSortable">
        @foreach (var link in Model.SidebarLinks)
        {
            @Html.HiddenFor(x => x.SidebarLinks[count].ID, new { @class = "hiddenID hiddenInput_" + Model.SidebarLinks[count].ID })
            <li class="mediaDashboardLink" data-hiddeninputid="@Html.IdFor(x => x.SidebarLinks[count].Order)" style="padding-top: 10px; margin-bottom: 2vh;">               
                @Html.HiddenFor(x => x.SidebarLinks[count].ParentApplicationId, new { @class = "hiddenInput_" + Model.SidebarLinks[count].ID })
                @Html.HiddenFor(x => x.SidebarLinks[count].ParentApplicationName, new { @class = "hiddenInput_" + Model.SidebarLinks[count].ID })
                @Html.HiddenFor(x => x.SidebarLinks[count].Order, new { @class = "hiddenOrder hiddenInput_" + Model.SidebarLinks[count].ID })
                <div class="row">
                    <div class="col-sm-2">
                        <span class="btn btn-primary move" type="button"><span class="fa fa-arrows"></span></span>
                    </div>
                    <div class="col-sm-8 text-center">
                        <h4>
                            <span class="iconContainer"><span class="fa @Model.SidebarLinks[count].DisplayIcon"></span></span>
                            &nbsp;&nbsp;
                            <span class="titleContainer">@Model.SidebarLinks[count].DisplayName</span>
                        </h4>
                    </div>
                    <div class="col-sm-2">
                        @{
                            var linkText = "<span class='fa fa-trash'></span>";
                            var actionLink = Ajax.ActionLink("REPLACE", "RemoveMediaDashboardLink", "MediaDashboard", new {ID = Model.SidebarLinks[count].ID}, new AjaxOptions() {HttpMethod = "GET", OnSuccess = "RemoveMediaLink('#deleteLink_" + Model.SidebarLinks[count].ID + "')", OnFailure = "ManageMediaAjaxFailure"}, new {data_content = linkText, @id = "deleteLink_" + Model.SidebarLinks[count].ID, @class = "btn btn-danger deleteGroup deleteMediaLink", @style = "float:right;"});
                            @Html.Raw(actionLink.ToHtmlString().Replace("REPLACE", linkText))
                        }
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-sm-6 text-center">
                        <div style="margin-bottom: 8px" class="input-group">
                            <span class="input-group-btn">
                                <button data-placement="left"
                                        class="btn btn-default iconpicker"
                                        name="@Html.NameFor(x => x.SidebarLinks[count].DisplayIcon)"
                                        role="iconpicker"
                                        data-iconset="fontawesome"
                                        data-icon="@Model.SidebarLinks[count].DisplayIcon"
                                        type="button"></button>
                            </span>
                            @Html.TextBoxFor(x => x.SidebarLinks[count].DisplayName, new {@class = "form-control namer", style = "margin-bottom: 0px", placeholder = "Display Name"})
                        </div>
                    </div>
                    <div class="col-sm-6 text-center">
                        <div style="margin-bottom: 8px" class="input-group">
                            <div class="input-group-addon">URL</div>
                            @Html.TextBoxFor(x => x.SidebarLinks[count].URL, new {@class = "form-control", style = "margin-bottom: 0px", placeholder = "http://www.google.ca/"})
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-6 text-center">
                        <div class="form-group">
                            <div class="checkbox-inline">
                                <label class="switch">
                                    @Html.EditorFor(o => o.SidebarLinks[count].IsDefault, new {@class = "trendClick"})
                                    <div class="slider round"></div>
                                </label>
                                @Html.LabelFor(o => o.SidebarLinks[count].IsDefault, "Is Default Link?", new {@style = "font-weight: normal; margin-bottom: 0px;"})
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 text-center">
                        <div class="form-group">
                            <div class="checkbox-inline">
                                <label class="switch">
                                    @Html.EditorFor(o => o.SidebarLinks[count].IsEnabled, new {@class = "trendClick"})
                                    <div class="slider round"></div>
                                </label>
                                @Html.LabelFor(o => o.SidebarLinks[count].IsEnabled, "Is Link Enabled?", new {@style = "font-weight: normal; margin-bottom: 0px;"})
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 text-center">
                        @Html.ValidationMessageFor(x => x.SidebarLinks[count].DisplayName)
                    </div>
                </div>
            </li>
            count++;
        }
        </ul>
    </div>

    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <button class="form-control btn btn-success" id="addNewMediaDashboardLink" type="button" style="border-color: #00bc8c !important; background-color: #00bc8c !important;"><span class="glyphicon glyphicon-plus"></span>&nbsp;Add New Link</button>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <input class="form-control btn btn-success" id="updateMediaDashboard" type="submit" value="Update Media Dashboard">
        </div>
    </div>

}

@Html.Partial("../MediaDashboard/_NewLink")